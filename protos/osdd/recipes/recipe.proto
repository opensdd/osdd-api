syntax = "proto3";

package osdd.recipes.recipe;

option go_package = "github.com/opensdd/osdd-api/clients/go/osdd/recipes";

import "osdd/recipes/context.proto";
import "osdd/recipes/ide.proto";
import "osdd/content.proto";
import "osdd/common.proto";

message Recipe {
  optional content.Prefetch prefetch = 1;
  optional context.Context context = 2;
  optional ide.Ide ide = 3;
}

message ExecutableRecipe {
  Recipe recipe = 1;
  EntryPoint entry_point = 2;
}

message EntryPoint {
  string ide_type = 1;
  optional StartConfig start = 2;
  optional WorkspaceConfig workspace = 3;
}

message StartConfig {
  oneof type {
    string command = 100;
    string prompt = 101;
  }
}

// Describes workspace from which the recipe should be executed.
message WorkspaceConfig {
  // If true, then the recipe requires a workspace, as opposed to running in the current directory.
  bool enabled = 1;
  // Path to the workspace relative to the home directory root.
  string path = 2;
  // Configuration for unique name generation.
  optional common.NameGenConfig unique = 3;
}


